{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\achal\\\\Desktop\\\\Webdev\\\\to-do-app\\\\todoapp\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\achal\\\\Desktop\\\\Webdev\\\\to-do-app\\\\todoapp\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\achal\\\\Desktop\\\\Webdev\\\\to-do-app\\\\todoapp\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\achal\\\\Desktop\\\\Webdev\\\\to-do-app\\\\todoapp\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\achal\\\\Desktop\\\\Webdev\\\\to-do-app\\\\todoapp\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./App.css\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.fetchTasks=function(){console.log(\"Fetching...\");fetch(\"http://127.0.0.1:8000/api/task-list/\").then(function(response){return response.json();}).then(function(data){return _this.setState({todoList:data});});};_this.getCookie=function(name){var cookieValue=null;if(document.cookie&&document.cookie!==\"\"){var cookies=document.cookie.split(\";\");for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();// Does this cookie string begin with the name we want?\nif(cookie.substring(0,name.length+1)===name+\"=\"){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;};_this.handleChange=function(e){var name=e.target.name;var value=e.target.value;console.log(\"Name:\",name);console.log(\"value:\",value);_this.setState({activeItem:_objectSpread(_objectSpread({},_this.state.activeItem),{},{title:value})});};_this.handleSubmit=function(e){e.preventDefault();console.log(\"ITEM:\",_this.state.activeItem);var csrftoken=_this.getCookie(\"csrftoken\");var url=\"http://127.0.0.1:8000/api/task-create/\";if(_this.state.editing==true){url=\"http://127.0.0.1:8000/api/task-update/ \".concat(_this.state.activeItem.id,\"/\");_this.setState({editing:false});}fetch(url,{method:\"POST\",headers:{\"Content-type\":\"application/json\",\"X-CSRFToken\":csrftoken},body:JSON.stringify(_this.state.activeItem)}).then(function(response){_this.fetchTasks();_this.setState({activeItem:{id:null,title:\"\",completed:false}});}).catch(function(error){console.log(\"Error:\",error);});};_this.startEdit=function(task){_this.setState({activeItem:task,editing:true});};_this.deleteItem=function(task){var csrftoken=_this.getCookie(\"csrftoken\");fetch(\"http://127.0.0.1:8000/api/task-delete/\".concat(task.id,\"/\"),{method:\"DELETE\",headers:{\"Content-type\":\"application/json\",\"X-CSRFToken\":csrftoken}}).then(function(response){_this.fetchTasks();});};_this.strikeUnstike=function(task){task.completed=!task.completed;var csrftoken=_this.getCookie(\"csrftoken\");console.log(\"Task:\",task.completed);fetch(\"http://127.0.0.1:8000/api/task-update/ \".concat(task.id,\"/\"),{method:\"POST\",headers:{\"Content-type\":\"application/json\",\"X-CSRFToken\":csrftoken},body:JSON.stringify({completed:task.completed,title:task.title})}).then(function(response){_this.fetchTasks();});};_this.state={todoList:[],activeItem:{id:null,title:\"\",completed:false},editing:false};return _this;}_createClass(App,[{key:\"componentWillMount\",value:function componentWillMount(){this.fetchTasks();}},{key:\"render\",value:function render(){var tasks=this.state.todoList;var self=this;return/*#__PURE__*/React.createElement(\"div\",{id:\"task-container\"},/*#__PURE__*/React.createElement(\"div\",{id:\"form-wrapper\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,id:\"form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{style:{flex:7}},/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleChange,type:\"text\",id:\"input\",className:\"form-control\",name:\"title\",value:this.state.activeItem.title,placeholder:\"Task Todo...\",\"aria-describedby\":\"emailHelp\"})),/*#__PURE__*/React.createElement(\"div\",{style:{flex:1}},/*#__PURE__*/React.createElement(\"button\",{id:\"submit\",type:\"submit\",name:\"add\",className:\"btn btn-primary\"},\"Submit\"))))),/*#__PURE__*/React.createElement(\"div\",{id:\"list-wrapper\"},tasks.map(function(task,index){return/*#__PURE__*/React.createElement(\"div\",{style:{flex:7},key:index,className:\"task-wrapper flex-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return self.strikeUnstike(task);},style:{flex:7}},task.completed==false?/*#__PURE__*/React.createElement(\"span\",null,task.title):/*#__PURE__*/React.createElement(\"strike\",null,task.title)),/*#__PURE__*/React.createElement(\"div\",{style:{flex:1}},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return self.startEdit(task);},id:\"edit\",className:\"btn btn-sm btn-outline-info\"},\"Edit\")),/*#__PURE__*/React.createElement(\"div\",{style:{flex:1}},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return self.deleteItem(task);},className:\"btn btn-sm btn-danger\"},\"Delete\")));})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/achal/Desktop/Webdev/to-do-app/todoapp/frontend/src/App.js"],"names":["React","Component","App","props","fetchTasks","console","log","fetch","then","response","json","data","setState","todoList","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","handleChange","e","target","value","activeItem","state","title","handleSubmit","preventDefault","csrftoken","url","editing","id","method","headers","body","JSON","stringify","completed","catch","error","startEdit","task","deleteItem","strikeUnstike","tasks","self","flex","map","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      todoList: [],\n      activeItem: {\n        id: null,\n        title: \"\",\n        completed: false,\n      },\n      editing: false,\n    };\n  }\n\n  componentWillMount() {\n    this.fetchTasks();\n  }\n\n  fetchTasks = () => {\n    console.log(\"Fetching...\");\n\n    fetch(\"http://127.0.0.1:8000/api/task-list/\")\n      .then((response) => response.json())\n      .then((data) =>\n        this.setState({\n          todoList: data,\n        })\n      );\n  };\n\n  getCookie = (name) => {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== \"\") {\n      const cookies = document.cookie.split(\";\");\n      for (let i = 0; i < cookies.length; i++) {\n        const cookie = cookies[i].trim();\n        // Does this cookie string begin with the name we want?\n        if (cookie.substring(0, name.length + 1) === name + \"=\") {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n    return cookieValue;\n  };\n\n  handleChange = (e) => {\n    var name = e.target.name;\n    var value = e.target.value;\n    console.log(\"Name:\", name);\n    console.log(\"value:\", value);\n\n    this.setState({\n      activeItem: {\n        ...this.state.activeItem,\n        title: value,\n      },\n    });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    console.log(\"ITEM:\", this.state.activeItem);\n\n    var csrftoken = this.getCookie(\"csrftoken\");\n    var url = \"http://127.0.0.1:8000/api/task-create/\";\n\n    if (this.state.editing == true) {\n      url = `http://127.0.0.1:8000/api/task-update/ ${this.state.activeItem.id}/`;\n      this.setState({\n        editing: false,\n      });\n    }\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"X-CSRFToken\": csrftoken,\n      },\n      body: JSON.stringify(this.state.activeItem),\n    })\n      .then((response) => {\n        this.fetchTasks();\n        this.setState({\n          activeItem: {\n            id: null,\n            title: \"\",\n            completed: false,\n          },\n        });\n      })\n      .catch((error) => {\n        console.log(\"Error:\", error);\n      });\n  };\n\n  startEdit = (task) => {\n    this.setState({\n      activeItem: task,\n      editing: true,\n    });\n  };\n\n  deleteItem = (task) => {\n    var csrftoken = this.getCookie(\"csrftoken\");\n\n    fetch(`http://127.0.0.1:8000/api/task-delete/${task.id}/`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"X-CSRFToken\": csrftoken,\n      },\n    }).then((response) => {\n      this.fetchTasks();\n    });\n  };\n\n  strikeUnstike = (task) => {\n    task.completed = !task.completed;\n    var csrftoken = this.getCookie(\"csrftoken\");\n\n    console.log(\"Task:\", task.completed);\n    fetch(`http://127.0.0.1:8000/api/task-update/ ${task.id}/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"X-CSRFToken\": csrftoken,\n      },\n      body: JSON.stringify({ completed: task.completed, title: task.title }),\n    }).then((response) => {\n      this.fetchTasks();\n    });\n  };\n\n  render() {\n    var tasks = this.state.todoList;\n    var self = this;\n    return (\n        <div id=\"task-container\">\n          <div id=\"form-wrapper\">\n            <form onSubmit={this.handleSubmit} id=\"form\">\n              <div className=\"flex-wrapper\">\n                <div style={{ flex: 7 }}>\n                  <input\n                    onChange={this.handleChange}\n                    type=\"text\"\n                    id=\"input\"\n                    className=\"form-control\"\n                    name=\"title\"\n                    value={this.state.activeItem.title}\n                    placeholder=\"Task Todo...\"\n                    aria-describedby=\"emailHelp\"\n                  />\n                </div>\n\n                <div style={{ flex: 1 }}>\n                  <button\n                    id=\"submit\"\n                    type=\"submit\"\n                    name=\"add\"\n                    className=\"btn btn-primary\"\n                  >\n                    Submit\n                  </button>\n                </div>\n              </div>\n            </form>\n          </div>\n\n          <div id=\"list-wrapper\">\n            {tasks.map((task, index) => {\n              return (\n                <div\n                  style={{ flex: 7 }}\n                  key={index}\n                  className=\"task-wrapper flex-wrapper\"\n                >\n                  <div\n                    onClick={() => self.strikeUnstike(task)}\n                    style={{ flex: 7 }}\n                  >\n                    {task.completed == false ? (\n                      <span>{task.title}</span>\n                    ) : (\n                      <strike>{task.title}</strike>\n                    )}\n                  </div>\n\n                  <div style={{ flex: 1 }}>\n                    <button\n                      onClick={() => self.startEdit(task)}\n                      id=\"edit\"\n                      className=\"btn btn-sm btn-outline-info\"\n                    >\n                      Edit\n                    </button>\n                  </div>\n                  <div style={{ flex: 1 }}>\n                    <button\n                      onClick={() => self.deleteItem(task)}\n                      className=\"btn btn-sm btn-danger\"\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}